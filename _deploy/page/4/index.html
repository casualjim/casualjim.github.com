
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

  <meta charset="utf-8">
  <title>Ivan Porto Carrero</title>
  <meta name="author" content="Ivan Porto Carrero">

  
  <meta name="description" content="Manning published my white paper &#8211; or green paper as they call it &#8211; on IronRuby. You can find it here: http://manning.com/free/ &hellip;">
  

  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- http://t.co/dKP3o1e -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <link rel="canonical" href="http://flanders.co.nz/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/css/base.css" rel="stylesheet" type="text/css">
  <link href="/css/skeleton.css" rel="stylesheet" type="text/css">
  <link href="/css/syntax.css" rel="stylesheet" type="text/css">
  <link href="/css/style.css" rel="stylesheet" type="text/css">
  <link href="/css/skins/blue.css" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/images/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

  <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>  
  <script src="/js/modernizr.js" type="text/javascript"></script>
  <script src="/js/jquery.easing.1.3.js" type="text/javascript"></script>
  <script type="text/javascript" src="/js/jquery.illuminate.0.7.min.js"></script>
  <!-- tweet
  <script type="text/javascript" src="/js/tweet/twitter.js"></script>
  <script type="text/javascript" src="/js/tweet/setting.js"></script> -->
  
  <script type="text/javascript" src="/js/custom.js"></script>
  <link href="/atom.xml" rel="alternate" title="Ivan Porto Carrero" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-240612-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body >
  <div id="wrapper">
    <header role="banner"> <div class="container">
    <div class="row clearfix">
      <hdgroup>
        <div class="four columns">
          <div class="logo">
            <img src="/images/logo.png" alt="" />
            <h2>Rants &amp; ramblings</h2>
          </div>  
        </div>
      </hdgroup>
      <nav role="navigation"><!-- <ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:flanders.co.nz" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
   -->
<ul>
  <li>
    <a href="/">Home
      <span>Homepage</span>
    </a>    
  </li>
  <li>
    <a href="/archives">Archives
      <span>Articles</span>
    </a>    
  </li>
  <li>
    <a href="/projects">Projects
      <span>Open-Source</span>
    </a>    
  </li>
  <li>
    <a href="/about">About me
      <span>Introduction</span>
    </a>    
  </li>
</ul>
</nav>

    </div>
  </div>  
<!-- <hgroup>
  <h1><a href="/">Ivan Porto Carrero</a></h1>
  
    <h2>IO(thoughts) foreach (_.propagandize)</h2>
  
</hgroup>
 -->
</header>
    <div class="container bodycontent">
      <div class="row clearfix">
        <div class="sixteen columns headline">
          <h2>Ivan Porto Carrero</h2>
          <p class="italic">IO(thoughts) foreach (_.propagandize)</p>
        </div>
      </div>  

      <div class="sixteen columns">
        <div class="divider row"></div>
      </div>  
      
      <!-- start of row -->
      <div class="row clearfix">
        <div class="sixteen columns">
          <!-- twitter feed -->
          <div class="twitter_feed">
            <ul class="tweet_list"></ul>
          </div>
        </div>
      </div>  
      <div class="sixteen columns">
        <div class="divider row"></div>
      </div>  
      
      <div id="maincontent" class="clearfix">
        <div class="five columns">  
  <aside class="left-sidebar">
    
        
<div class="widget row">
  <h5>Search form</h5>  
  <div id="search-form">
    <form action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:flanders.co.nz" />
        <input id="search-box" type="text" name="q" results="0" placeholder="Search"/>
        <input type="submit" value="Search" id="search-button" />
        <div class="clear"></div>
      </fieldset>
    </form>
  </div>
</div>
   <section>
  <div class="widget row">
    <h5>Recent Posts</h5>  
    <ul id="recent_posts">
      
        <li class="post">
          <a href="/2011/08/01/backchat-developers/">work for backchat</a>
        </li>
      
        <li class="post">
          <a href="/2010/09/30/radical-language-and-platform-shift/">Radical language and platform shift</a>
        </li>
      
        <li class="post">
          <a href="/2010/03/12/video-of-fosdem-ironruby-presentation/">Video of FOSDEM IronRuby presentation</a>
        </li>
      
        <li class="post">
          <a href="/2009/12/01/adding-a-console-to-your-ironruby-application/">Adding a console to your IronRuby application</a>
        </li>
      
        <li class="post">
          <a href="/2009/11/08/a-good-url-regular-expression-repost/">A good url regular expression? (repost)</a>
        </li>
      
    </ul>
  </div>
</section>

<section>
  <div class="widget row">
    <h5>GitHub Repos</h5>
    <ul id="gh_repos">
      <li class="loading">Status updating&#8230;</li>
    </ul>
    
    <a href="https://github.com/casualjim">@casualjim</a> on GitHub
    
  </div>
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = 'javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'casualjim',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"></script>
</section>


<section>
  <div class="widget row">
    <h5>Latest Tweets</h5>
    <ul id="tweets">
      <li class="loading">Status updating&#8230;</li>
    </ul>
    <script type="text/javascript">
      $(document).ready(function(){
        // getTwitterFeed("casualjim", 4, false);
      });
    </script>
    
      <a href="http://twitter.com/casualjim" class="twitter-follow-button" data-show-count="false">Follow @casualjim</a>
    
  </div>
</section>


<section>
  <div class="widget row">
    <h5>On Delicious</h5>
    <div id="delicious"></div>
    <script type="text/javascript" src="http://feeds.delicious.com/v2/json/casualjim?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
    <p><a href="http://delicious.com/casualjim">My Delicious Bookmarks &raquo;</a></p>
  </div>
</section>


<section class="googleplus">
  <div class="widget row">
    <h5>
      <a href="https://plus.google.com/106536131996809745163?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h5>
  </div>
</section>



    
  </aside>
</div>
<div class="eleven columns">
<div class="blog-index">
  
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">26</p>  
    <div class="month-year"><p><span>Aug</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/08/26/white-paper-on-ironruby-published/" title="">White Paper on IronRuby Published</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>Manning published my white paper &#8211; or green paper as they call it &#8211; on IronRuby.</p>

<p>You can find it here: <a href="http://manning.com/free/green_carrero.html">http://manning.com/free/green_carrero.html</a></p>

<p>This paper tries to give you an introduction on what the ruby language is and how it could work for you. If you want to know more than what&#8217;s on those pages there is always the book: <a href="http://manning.com/carrero">http://manning.com/carrero</a></p>

<p>Technorati Tags: <a href="http://technorati.com/tags/IronRuby">IronRuby</a></p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">19</p>  
    <div class="month-year"><p><span>Aug</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/08/19/ironnails-some-progress/" title="">IronNails: Some Progress</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>I thought it might be a good idea to update you guys on how IronNails is progressing. I think I&#8217;ve got it so that you aren&#8217;t exposed to writing many of the boring boilerplate code that comes with taking this approach (M - V - VM- C). Also to execute an action on a controller asynchronously you can by just adding :mode => :asynchronous to your view_action declaration.</p>

<p>A lot is still left to do but this proves that it is possible to use IronRuby today to do some pretty cool stuff. From the top of my head here are some things that still need to be done:</p>

<ul>
<li><p>The ability to load xaml from an assembly like the one that is generated when you use Blend for your design.</p></li>
<li><p>More predefined behaviors</p></li>
<li><p>Templated generators</p></li>
<li><p>Silverlight support</p></li>
</ul>


<p>But the core of the framework is working. Now it&#8217;s a matter of extending the functionality. Some of the features the framework does support</p>

<ul>
<li><p>Binding to controller actions through commands</p></li>
<li><p>Binding to controller actions through event handlers on the view proxy</p></li>
<li><p>Asynchronous execution of actions</p></li>
<li><p>Timed execution of actions</p></li>
<li><p>Binding to models</p></li>
</ul>


<p>I will be developing my sample for my chapter against this framework and will add the pieces I&#8217;m missing as I get on.</p>

<p>Some of the things I foresee that might need to be added are:</p>

<ul>
<li><p>support for controlling the application from an IronRuby console so that you can interact with the interface as it is running.</p></li>
<li><p>support for a console to interact with the code of the application.</p></li>
<li><p>support for plugins</p></li>
</ul>


<p>So after all these lists how would an application look like when you are developing it?</p>

<p>The controller:</p>

<figure class='code'><figcaption><span>demo_controller.rb    </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">DemoController</span> <span class="o">&lt;</span> <span class="no">IronNails</span><span class="o">::</span><span class="no">Controller</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">view_object</span> <span class="ss">:status_bar_message</span><span class="p">,</span> <span class="s2">&quot;The status bar message&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">view_action</span> <span class="ss">:change_message</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">change_message</span>
</span><span class='line'>    <span class="vi">@status_bar_message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#@status_bar_message</span><span class="s2"> appended&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The ViewModel:</p>

<figure class='code'><figcaption><span>DemoViewModel.cs</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">DemoViewModel</span> <span class="p">:</span> <span class="n">IronNails</span><span class="p">.</span><span class="n">View</span><span class="p">.</span><span class="n">ViewModel</span> <span class="p">{</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The View:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;Window</span>
</span><span class='line'>    <span class="na">xmlns=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span>
</span><span class='line'>    <span class="na">xmlns:x=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span>
</span><span class='line'>    <span class="na">xmlns:behaviors=</span><span class="s">&quot;clr-namespace:IronNails.Library.Behaviors;assembly=IronNails.Library&quot;</span>
</span><span class='line'>    <span class="na">Title=</span><span class="s">&quot;Window1&quot;</span> <span class="na">Height=</span><span class="s">&quot;300&quot;</span> <span class="na">Width=</span><span class="s">&quot;300&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;StackPanel&gt;</span>
</span><span class='line'>        <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">&quot;{Binding Objects[StatusBarMessage].Value}&quot;</span> <span class="nt">&gt;&lt;/TextBlock&gt;</span>
</span><span class='line'>        <span class="nt">&lt;Button</span> <span class="na">Content=</span><span class="s">&quot;Click me&quot;</span> <span class="na">behaviors:ClickBehavior.LeftClick=</span><span class="s">&quot;{Binding Commands[ChangeMessage]}&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/StackPanel&gt;</span>
</span><span class='line'><span class="nt">&lt;/Window&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are currently 2 dictionaries available to the view. One that contains the models (Objects) and one that contains the commands (Commands). The value of an entry in the Objects needs to be observable by implementing INotifyPropertyChanged and that is what&#8217;s responsible for the binding syntax Objects[ModelName].Value</p>

<p>At this moment there are only a couple of behaviors implemented: LeftClick, RightClick, DoubleClick and Hover.</p>

<p>The framework expects that you follow the basic naming conventions of the technology you&#8217;re programming in. So in ruby you underscore names but in C# and xaml you camelcase them.</p>

<p>By defining an object with view_object :object_name, default value you define it with a default value that you can change afterwards in the controller actions. By defining an action with view_action :action_name, :mode => :asynchronous you tell that framework that you want to link a method or a block as a controller action and execute it asynchronously.</p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">11</p>  
    <div class="month-year"><p><span>Aug</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/08/11/finally-found-the-insert-key-on-my-macbook-pro-keyboard/" title="">Finally Found the Insert Key on My Macbook Pro Keyboard</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>I finally managed to figure out what the insert key is on my macbook pro. I missed it a lot because in Resharper the standard command to generate code is Alt+Ins. This key combination seems to be engraved in my brain because it was really hard for me to use it with a different key combination. Anyway the winning combinations are:</p>

<p><em>Insert: <strong>fn+return</strong></em></p>

<p><em>Alt+Insert: <strong>fn + alt/option + return</strong></em></p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">07</p>  
    <div class="month-year"><p><span>Aug</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/08/07/ironnails-introduction/" title="">IronNails : Rails Like Development for IronRuby With WPF/Silverlight</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>For my book IronRuby I&#8217;m working on chapter 4. That chapter is about doing WPF development with IronRuby. I started out with a straight port of <a href="http://code.google.com/p/wittytwitter">Witty</a> to IronRuby. As I was doing that the cogs started turning and I came up with a way to bring the rails style of development to WPF. I decided to investigate that route a little bit further and now I have a small framework that enables you to write WPF applications with the MVC paradigm. I decided to open that code up as open source and host it on github.</p>

<p>At first I used the name Sails for my framework but it turns out there is java clone of rails that is called opensails. So to avoid confusion David M. Peterson proposed the name IronNails.</p>

<blockquote><p>On Sat, 02 Aug 2008 08:00:44 -0600, Charles Oliver Nutter wrote:</p>

<p>FYI, there&#8217;s already a framework named &#8220;Sails&#8221; for Java:      <br/>
<a href="http://www.opensails.org/">http://www.opensails.org/</a></p>

<p>For the sake of sticking to the &#8220;Iron&#8221; theme, why not replace the &#8216;S&#8217; with an &#8216;N&#8217; and go with IronNails. ;-) Maybed it&#8217;s just me, but if given the choice, I&#8217;d much rather nail it than sail it any day of the week. :D</p>

<p>&#8211;      <br/>
/M:D</p>

<p>M. David Peterson</p></blockquote>

<p>You can find the project here: <a href="http://github.com/casualjim/ironnails">http://github.com/casualjim/ironnails</a></p>

<p>At this moment it&#8217;s definitely not finished at all, but it does work. The remainder of the week I&#8217;ll move my previous demo code onto this framework, update the code samples in my chapter and finish the content. I hope I will have all of this done by the end of next week.</p>

<p>Back to the IronNails project:</p>

<p>Because DLR objects cannot be used to bind to in WPF you have to define a skeleton of the ViewModel in C#, but this will change in the future. When that changes I&#8217;ll look at extending the framework to make use of some other WPF patterns like defining a DependencyObject and Behaviors. Once those are defined you get a very clean separation between design and behavior.</p>

<p>This is abstracted away from you but in the background the framework works with the View - ViewModel - Model - Controller pattern although I&#8217;ve tried to keep your exposure to the view model to a minimum. The framework follows naming conventions per language. So in C# and XAML you camel case stuff and in IronRuby you underscore stuff.</p>

<p>The very core of the framework is defined in C# but most of the code is IronRuby, depending on how hard it will be after the DLR RTM&#8217;s I may look at adding support for all the DLR languages.</p>

<blockquote><h1>IronNails        </h1>

<p>IronNails is a framework inspired by the Rails and rucola frameworks. It offers a rails-like way of developing      <br/>
applications with IronRuby and Windows Presentation Foundation (WPF).       <br/>
This framework uses the pattern Model - ViewModel - View - Controller (M-VM-V-C). It should be able to run on both WPF       <br/>
and Silverlight.       <br/>
The idea is that the views can be created using a design tool like Blend for example and just save that xaml as is. The       <br/>
designer should not need to use anything else than drag and drop to create a GUI design. The behaviors are then added to       <br/>
the view by using predefined behaviors in the framework or by defining your own behavior.       <br/>
The framework then generates a proxy for the view which will be used to transparently wire up the commands in the       <br/>
behaviors to controller actions.</p></blockquote>

<p>You are now able to write the following code for a controller:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">MyController</span> <span class="o">&lt;</span> <span class="no">IronNails</span><span class="o">::</span><span class="no">Controller</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">view_action</span> <span class="ss">:show_message</span><span class="p">,</span> <span class="ss">:triggers</span> <span class="o">=&gt;</span> <span class="ss">:my_button</span> <span class="k">do</span>
</span><span class='line'>    <span class="no">MessageBox</span><span class="o">.</span><span class="n">show</span> <span class="s2">&quot;This is the great message from a block&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">view_action</span> <span class="ss">:change_color</span><span class="p">,</span> <span class="ss">:triggers</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:element</span> <span class="o">=&gt;</span> <span class="ss">:my_text_block</span><span class="p">,</span> <span class="ss">:event</span> <span class="o">=&gt;</span> <span class="ss">:mouse_enter</span> <span class="p">}</span>
</span><span class='line'>  <span class="n">view_action</span> <span class="ss">:reset_color</span><span class="p">,</span> <span class="ss">:triggers</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:element</span> <span class="o">=&gt;</span> <span class="ss">:my_text_block</span><span class="p">,</span> <span class="ss">:event</span> <span class="o">=&gt;</span> <span class="ss">:mouse_leave</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">view</span><span class="o">|</span>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">my_text_block</span><span class="o">.</span><span class="n">foreground</span> <span class="o">=</span> <span class="ss">:black</span><span class="o">.</span><span class="n">to_brush</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">view_object</span> <span class="ss">:people</span><span class="p">,</span> <span class="no">Person</span><span class="o">.</span><span class="n">find_all</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">change_color</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">my_text_block</span><span class="o">.</span><span class="n">foreground</span> <span class="o">=</span> <span class="ss">:red</span><span class="o">.</span><span class="n">to_brush</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>At this moment the project has 0 unit tests, it has below minimal documentation and it still needs a work like defining the behaviors. I have to move on with my book but intend to continue developing this framework after my book is finished and IronRuby RTM&#8217;s. There are some more workarounds in the project that will all disappear as IronRuby progresses.</p>

<p><a href="http://www.dotnetkicks.com/kick/?url=http%3a%2f%2fflanders.co.nz%2f2008%2f08%2f07%2fironnails-introduction%2f"><img src="http://www.dotnetkicks.com/Services/Images/KickItImageGenerator.ashx?url=http%3a%2f%2fflanders.co.nz%2f2008%2f08%2f07%2fironnails-introduction%2f" alt="kick it on DotNetKicks.com" /></a></p>

<p>Technorati Tags: <a href="http://technorati.com/tags/IronRuby">IronRuby</a>,<a href="http://technorati.com/tags/IronRubyInAction">IronRubyInAction</a>,<a href="http://technorati.com/tags/IronNails">IronNails</a>,<a href="http://technorati.com/tags/WPF">WPF</a></p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">13</p>  
    <div class="month-year"><p><span>Jul</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/07/13/moving-back-to-belgium/" title="">Moving Back to Belgium</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>Tonight is my last night in New Zealand. Tomorrow I will fly back to Belgium to see what has changed in the 3 years that I&#8217;ve been away. I already know that my home city Antwerp has changed a lot because they were completely redoing the place when I left. I think it might still too soon for a reflective post on my experiences in New Zealand. What I can say is that I had a great time here and I made some great friendships with some extraordinary people. Depending on who you ask this is a good or bad thing but I&#8217;ll surely be back in a couple of years :)</p>

<p>The first one on my list of great Kiwi personalities is <a href="http://blogs.msdn.com/alexj/">Alex James</a>. We had a whole bunch of architectural discussions and many of his ideas are still sitting in the back of my mind every day I write code. I met him at a point in my programming career when I was looking for something new. I didn&#8217;t want to use datasets any more, was looking for a replacement for webforms and he had quite a clever project Base4. This project is what got me started on Open Source and at this point I wouldn&#8217;t mind making a living working on open source projects I just don&#8217;t know quite yet how to start that :)</p>

<p>The second one is <a href="http://blog.bittercoder.com/">Alex Henderson</a>, he knew and probably knows a lot more about Castle&#8217;s windsor than I do and through some kind of blog conversation about using Base4 with Castle I finally got what Alex James meant when he said my code was quite monolithic at times. Alex Henderson showed me how to write readable code for other people than me. Very sometimes I know still catch myself writing big chuncks of code in one go but thanks to resharper I can quickly fix that now.</p>

<p>Furthermore there is the wonderful bunch of people at <a href="http://www.xero.com">Xero</a>. I had a great time working with them and figuring out what my strengths are as a developer. Although we didn&#8217;t always saw eye to eye <a href="http://pageofwords.com">Kirk</a> taught me that security goes way further than just the data. Security has to flow through from the whole company and all the way into the lowest level of your application. He was probably the voice of reason I often need and when I was programming other projects after I left Xero. I still thought to myself: would I be able to get away with uploading this and seeing what happens or should I really test this on a different non-dev machine. Then I see that look he gets and will dilligently grumble and test the thing, which, as it turns out, is almost always a good idea.<br/>
Everybody at Xero were really great collegues and there are times that I regretted going away there even if it was just for the cool bunch of people that work there. Craig for letting me see that &#8220;the Hutt&#8221; is the closest thing Wellington has to &#8220;the hood&#8221; and that the word box has more than one meaning.</p>

<p>Of course there are the guys from <a href="http://www.mindscape.co.nz">Mindscape</a>, all brilliant programmers. I don&#8217;t think you&#8217;ll find another company in New Zealand that has that big of a brains/person ratio. I&#8217;d say if they can&#8217;t solve it for you nobody can. I&#8217;m sure we will stay in touch. The discussions I had with <a href="http://andrewpeters.net/">Andrew Peters</a>, <a href="http://hestia.typepad.com/">Ivan Towlson</a>, <a href="http://turtle.net.nz/blog/">JB</a> and <a href="http://blog.bluecog.co.nz/">JD</a> really upped my game as a programmer. I think it&#8217;s always great to have discussions with people that have a different point of view, although I can get quite passionate about things, but I think it&#8217;s even more great if you can do it with brilliant people. That&#8217;s what my lunches with geeks were about :).
Not to forget the poker nights, they were always good fun. I think I still lost some money but I now understand the game of Poker :) It&#8217;s much like real life and in my case the best advice there is don&#8217;t get too ballsy and enthusiastic too early in the game it can prove to be disastrous. Another memory from poker is &#8220;the blue stuff&#8221;, an alcoholic beverage easily mistaken for anti-freeze but it works really well ;). The hangover the day after wasn&#8217;t always that great but that&#8217;s the price you pay :)</p>

<p>Then there are some people that aren&#8217;t necessarily kiwi but I met them here in New Zealand. <a href="http://bgeek.net/">Owen Evans</a> for showing me the light on mocking :) <a href="http://codeclimber.net.nz">Simone Chiaretta</a>, a very smart Italian programmer, his contributions to the community are quite invaluable.</p>

<p>I realise I left out a whole bunch of people like Keith Archibald, <a href="http://www.jwegesin.com/">Jeff Wegesin</a>, Vicky Rawsthorne and Ross McWhannel a.o. but I wanted to constrain myself to the programming experiences. I apologise too all the people I left out like the Kiwis that went to Europe before I got back: <a href="http://www.flog.co.nz/">Adam Burmister</a> and <a href="http://www.fastchicken.co.nz/">Nic Wise</a> I guess we&#8217;ll catch up soonish :)</p>

<p>Furthermore if you haven&#8217;t been to New Zealand yet. I think it&#8217;s about high time you order that ticket and get yourself over here. It&#8217;s absolutely drop dead gorgeous, the natives are friendly and it&#8217;s probably one of the safest places in the world. The atmosphere here is great it&#8217;s a huge mix of people coming from all over the world, which leads to some very interesting friendships and discussions.  I think the rest of the world can learn a lot from the kiwi&#8217;s on the matter of tolerance and not taking yourself too serious, as well as their acceptance and openness to different cultures and new experiences. So get over here and get yourself some kiwi outlook on life.</p>

<p>I&#8217;ll finish off this post with: It&#8217;s been absolutely magic mate ;)</p>

<p>Hei konaa raa</p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">12</p>  
    <div class="month-year"><p><span>Jul</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/07/12/how-i-got-started-in-software-development/" title="">How I Got Started in Software Development</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p><a href="http://www.michaeleatonconsulting.com/blog/Default.aspx">Michael Eaton</a> started a meme with the question: <a href="http://www.michaeleatonconsulting.com/blog/archive/2008/06/04/how-did-you-get-started-in-software-development.aspx">How did you get started in software development?</a></p>

<p>Yesterday <a href="http://codeclimber.net.nz/">Simone Chiaretta</a> <a href="http://codeclimber.net.nz/archive/2008/07/10/How-I-Got-Started-in-Software-Development.aspx">tagged me in his post</a>, so it’s now my turn to answer the questions and tag other bloggers:</p>

<h2>How old were you when you started programming?</h2>

<p>Like many other programmers I started at an early age. I learnt to read and write when I was 6 years old. By the time I was 8 a friend of my mother showed how to use the DOS command line and how to create batch scripts. This got me started to create the menu system so that my mother could also use the computer, I&#8217;ve been supporting my parents on their pcs ever since.  All the books I could find in those days were in English and I&#8217;m a Dutch speaker which made reading them at 8 years old quite hard.</p>

<h2>How did you get started in programming?</h2>

<p>That same friend also showed me windows 1.0 and paint which was nice but more cool to me was the gwbasic command he gave me. That thing opened up a wonderful world of line numbers and goto statements which made the computer do stuff. Hmmmmm do stuff. Suddenly I could understand the books because they had code in them and I understood code.</p>

<p>As a kid I was more interested in soccer and playing than programming but I came back to it from time to time.<br/>
A couple of years later I got interested in girls which was disastrous for my programming time, not much later I could drink alcohol so I abandonned programming as a hobby for a couple of years. In school however I got taught Turbo Pascal which revived my interest around the age of 15. I wrote blackjack in it that year and that was my big achievement for that year.</p>

<p>The next couple of years I had to make do with a very old computer that wouldn&#8217;t do much. In school I got 2 hours a week of programming dBase IV (joy joy) and MS Access in my graduation year. After my graduation I started working in the hospitality sector and started partying hard, no programming for the next couple of years :).</p>

<h2>What was your first language?</h2>

<p>I guess it was batch scripting, the fancy menus back in those days with drop shadow boxes etc.</p>

<p>But I wrote snake and such around the same time in GW-BASIC which I really consider to be my first language.</p>

<h2>What was the first real program you wrote?</h2>

<p>I won&#8217;t count the little batch scripts etc. I guess the first program I wrote completely from scratch and without the help of a manual of some sort must be BlackJack at the age of 15 in Turbo Pascal.</p>

<h2>What languages have you used since you started programming?</h2>

<p>Batch scripting, GW-BASIC, qBasic, Borland Turbo Pascal, VB6, VB.NET, C#, Javascript, HTML, CSS, XML, XSL, Bash</p>

<h2>What was your first professional programming gig?</h2>

<p>I guess that would mean the first time I got paid. I wrote a couple of scripts and a little bit of Access for a company my father worked for when I was 16.  After that it took me until I was 22 to get started as a web developper after my day job.</p>

<h2>If you knew then what you know now, would you have started programming?</h2>

<p>Hell yeah :) I loooooove programming :-D. While I took prolonged break during the early years of my programming life it has always been there silently calling my name. I don&#8217;t know if there is anything else in the world I love doing more as a profression.</p>

<h2>If there is one thing you learned along the way that you would tell new developers, what would it be?</h2>

<p>RTFM and consequently go forth and explore. And never stop communicating with the team and users.</p>

<h2>What&#8217;s the most fun you&#8217;ve ever had&#8230; programming?</h2>

<p>While there are many things in programming I love like learning new stuff and such. I guess for me programming is about getting into the zone. You code away and a couple of hours later you wrote something great. I also love the constant little victories :)</p>

<h2>Now on to others</h2>

<p>This is the time where I get to pick a couple of people. Uhmm, I pick:</p>

<ul>
<li><a href="http://andrewpeters.net">Andrew Peters</a></li>
<li><a href="http://blog.bittercoder.com">Alex Henderson</a></li>
<li><a href="http://hestia.typepad.com">Ivan Towlson</a></li>
</ul>

</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">12</p>  
    <div class="month-year"><p><span>Jun</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/06/12/dynamic-script-control/" title="">Dynamic Script Control</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>Both Silverlight and WPF use XAML markup to describe their user interface. As I&#8217;m currently writing my chapter on WPF for my book IronRuby In Action and I want to use some xaml that has been generated before for a different project but with an IronRuby class to load the xaml I&#8217;m in trouble. This is because you can declare assembly references in the xml namespace declarations so you can use the types in that assembly from xaml.</p>

<p>The DLR based languages don&#8217;t compile into static assemblies and this means that you can&#8217;t use those xml namespace definitons to reference your assemblies. I wrote a fairly trivial control that acts like a hook for DLR based controls in the XAML tree.</p>

<p>You can check it out at codeplex.    <br/>
<a href="http://codeplex.com/dynamicscriptcontrol">http://codeplex.com/dynamicscriptcontrol</a></p>

<p>The idea behind this control is that you can &#8220;hook&#8221; your DLR based control into the visual tree by setting some properties. You can set properties on the DLR based control by setting the Attributes property on the DynamicScriptControl</p>

<p>Let&#8217;s look at a quick example:</p>

<ol>
<li>The ruby file defining a custom TextBox. But you can do whatever you want in that ruby file of course.</li>
</ol>


<p><a href="http://flanders.co.nz/wp-content/uploads/2008/06/dynamic-script-control-rubyscript.png"><img src="http://flanders.co.nz/wp-content/uploads/2008/06/dynamic-script-control-rubyscript-thumb.png" alt="dynamic_script_control_rubyscript" /></a></p>

<p>All this textbox does is preset it&#8217;s text property to &#8220;I&#8217;m prefilled&#8221;</p>

<ol>
<li>The xaml for the window</li>
</ol>


<p><a href="http://flanders.co.nz/wp-content/uploads/2008/06/dynamic-script-control-window-xaml.png"><img src="http://flanders.co.nz/wp-content/uploads/2008/06/dynamic-script-control-window-xaml-thumb.png" alt="dynamic_script_control_window_xaml" /></a></p>

<p>You first declare a namespace for the assembly that has the DynamicScriptControl. Next I have a StackPanel that contains 2 DynamicScriptControls. The first just contains the 2 mandatory properties. We need to know which class you want to instantiate in the file you provide by setting the ScriptFile property. This script file property is a path to your ruby file in my case prefilled_text_box.rb.    <br/>
The second DynamicScriptControl is one where I want to initialize the control with my own text property. To declare those properties you have to add them to the Attributes collection of the DynamicScriptControl. At this moment it&#8217;s not smart enough to know which datatype you give it so you can specify a format string which was necessary in this case because text is a string.</p>

<ol>
<li>The result</li>
</ol>


<p><a href="http://flanders.co.nz/wp-content/uploads/2008/06/dynamic-script-control-window.png"><img src="http://flanders.co.nz/wp-content/uploads/2008/06/dynamic-script-control-window-thumb.png" alt="dynamic_script_control_window" /></a></p>

<p>Michael Foord the author of IronPython In Action will provide the python integration in this control.</p>

<p>There was a release of the Dynamic Silverlight SDK earlier this week which contained the necessary source code files to compile a common DLR for both IronRuby and IronPython. That is what makes it possible to support multiple scripting languages from the start.</p>

<p>I&#8217;ve hosted the source code on google and you can find that at:</p>

<p><a href="http://code.google.com/p/dynamic-script-control">http://code.google.com/p/dynamic-script-control</a></p>

<p>Technorati Tags: <a href="http://technorati.com/tags/ironruby">ironruby</a>,<a href="http://technorati.com/tags/WPF">WPF</a>,<a href="http://technorati.com/tags/DLR">DLR</a>,<a href="http://technorati.com/tags/ironpython">ironpython</a>,<a href="http://technorati.com/tags/Silverlight">Silverlight</a></p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">16</p>  
    <div class="month-year"><p><span>May</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/05/16/the-ironruby-in-action-book-went-into-eap-today-2/" title="">The IronRuby in Action Book Went Into EAP Today</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>It&#8217;s been a bit of journey but my <a href="http://manning.com/carrero">IronRuby in Action</a> book finally went into EAP today. EAP means exactly what it means in the software world, still very much subject to change. This could be seen as a public review :)  I welcome any suggestions you may have.</p>

<p>You can find the book at <a href="http://manning.com/carrero">http://manning.com/carrero</a>
There is also a forum there where you can post suggestions and/or problems you may encounter when running the code samples. I look at it as my issue tracker :)</p>

<p>I&#8217;m currently working on a chapter where I build a complete twitter client with IronRuby and WPF (not silverlight as indicated on the current TOC). It is based on Witty but uses IronRuby instead of C# to drive the xaml. Also some storyboards have been replaced by IronRuby instead of by xaml stuff. It&#8217;s also not a straight port of Witty because I haven&#8217;t really looked at their code apart from the xaml that is.</p>

<p>Happy reading :)</p>

<p>Update: Some people started calling it the &#8220;jugs book&#8221;</p>

<p><a href="http://www.dotnetkicks.com/kick/?url=http%3a%2f%2fflanders.co.nz%2f2008%2f05%2f16%2fthe-ironruby-i%e2%80%a6to-eap-today-2"><img src="http://www.dotnetkicks.com/Services/Images/KickItImageGenerator.ashx?url=http%3a%2f%2fflanders.co.nz%2f2008%2f05%2f16%2fthe-ironruby-i%e2%80%a6to-eap-today-2" alt="kick it on DotNetKicks.com" /></a></p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">13</p>  
    <div class="month-year"><p><span>May</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/05/13/using-the-mini-spec-framework-that-comes-with-ironruby/" title="">Using the Mini Spec Framework That Comes With IronRuby</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>I&#8217;ve set out to build my first &#8220;real&#8221; application (still playground material) with IronRuby today and for me no application can be built without having the unit tests or specs to give me that warm fuzzy feeling that things should work. That being said the first thing on my list of things to do is figure out how to use the minispec framework that IronRuby currently uses to write my specs.</p>

<p>Since my application will be doing a fair bit of http requests I want to be able to mock that out so I don&#8217;t have to rely on the webservers to be up and running or being online to run the specs.</p>

<p>The first thing I did was copy a couple of files from the <strong>tests\IronRuby\Specs </strong>directory in the directory where you downloaded the IronRuby source code into <code>C:\tools\IronRuby</code> in my case. I copied those files in a specs subdirectory of my application directory. The files we&#8217;re going to need are:</p>

<ul>
<li><p>mini_mock.rb</p></li>
<li><p>mini_rspec.rb</p></li>
<li><p>mspec_helper.rb</p></li>
<li><p>rspec_helper.rb</p></li>
<li><p>simple_mock.rb</p></li>
<li><p>spec_helper.rb</p></li>
<li><p>spec_runner.rb</p></li>
</ul>


<p>The next thing on my to-do list is then to change some of the files so that we can run our own specs on our terms.</p>

<p>The first changes I made are in spec_helper.rb. I replace require &#8216;mini_mock&#8217; on line 18 with <code>require File.dirname(__FILE__) + '/mini_mock'</code></p>

<p>The next bit is in the spec_runner.rb file. I just removed the word <em>core/</em> in that file because our specs will just live in a directory structure under the specs folder.</p>

<p>Now to create the first spec and mock with that spec framework:</p>

<p>I created a folder models in my specs folder. In that folder I created a file <code>spec_test_spec.rb</code> with the following content</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/../spec_helper.rb&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">describe</span> <span class="s2">&quot;Specs&quot;</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">it</span> <span class="s2">&quot;should work&quot;</span> <span class="k">do</span>
</span><span class='line'>    <span class="c1"># puts &quot;Yay!!! It works&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">it</span> <span class="s2">&quot;should mock methods&quot;</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">mock</span> <span class="o">=</span> <span class="no">Object</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>    <span class="n">mock</span><span class="o">.</span><span class="n">should_receive</span> <span class="ss">:mocked_method</span><span class="p">,</span> <span class="ss">:returning</span> <span class="o">=&gt;</span> <span class="s2">&quot;Yay!!! I&#39;m mocking&quot;</span>
</span><span class='line'>    <span class="n">result</span> <span class="o">=</span> <span class="n">mock</span><span class="o">.</span><span class="n">mocked_method</span>
</span><span class='line'>    <span class="n">result</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="s2">&quot;Yay!!! I&#39;m mocking&quot;</span>
</span><span class='line'>    <span class="c1"># puts result</span>
</span><span class='line'>    <span class="no">Mock</span><span class="o">.</span><span class="n">verify</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This just has a test method to see if it will run the rspec syntax and the second is where I tested to see if I could mock methods on objects. In the future we&#8217;ll be able to use mocha and rspec for example and then we&#8217;ll have a nicer syntax for mocking stuff. But this will do for now.</p>

<p>Then I opened up a command console and navigated to the folder that contains my application</p>

<pre><code>+ C:\projects\lumpr\src\Sylvester.DesktopEdition\Sylvester.IronRuby\specs

» **ir spec_runner.rb models - pass**

Specs should work
Specs should mock methods
Total pass: 2 out of 2 examples
</code></pre>

<p>I may post an example later this week with some real tests but this shows you how to get going with the mini spec framework to test your .NET stuff today.</p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  
    <article class="blogpost row">
      
  <div class="post-heading"> 
    



    <p class="date">23</p>  
    <div class="month-year"><p><span>Apr</span><br />2008</p></div>



    
      <div class="post-title">
        <h5>
          <a href="/2008/04/23/taking-ninject-to-new-places/" title="">Taking Ninject to New Places</a>
        </h5>
      </div> 
    
    <div class="clear"></div>
  </div>
  <!-- end of post heading -->
  
  <!-- start of post meta -->
  <div class="post-meta">
    <p>
       
  

<span class="byline author vcard">Posted by <span class="fn">Ivan Porto Carrero</span></span>

       
     </p>  
  </div>
  <!-- end of post meta -->
  


  <div class="entry-content"><p>When I started looking at <a href="http://ninject.org">Ninject</a> I was pretty impressed by how nice the code looks and how well the project has been put together.  <a href="http://kohari.org">Nate</a> had been profiling the project yesterday and it performs slightly better than its cousin from the <a href="http://castleproject.org">Castle framework</a> but that difference is almost negligible.
However I recommend you download the Ninject framework and just look at its codebase because it may teach you some new tricks or give you some new insights. The rest of this post will explain a small MVP framework for Ninject and WPF that I added to <a href="http://code.google.com/p/ninject-contrib/">Ninject contrib</a> last weekend.</p>

<p>When I downloaded the Ninject code for the first time I immediately saw that it had integration points for <a href="http://castleproject.org">Monorail</a>, <a href="http://asp.net">ASP.NET</a> and Winforms but sadly I was looking at it for a WPF application. For doing the type of MVP I wanted to do with WPF I couldn&#8217;t straight copy what was there for Winforms and neither what was there for Webforms. It looked like it walked some middle ground. So I looked very closely at what Nate had done before me and learned.</p>

<p>Apart from the occasional IronRuby demo I had never used WPF with the intent of building a moderately sized system on top of it. I did have a couple of design guidelines that helped me through my voyage but most of my what I applied comes from Jeremy Miller&#8217;s blog in his excellent build your own CAB series. I looked at 1 post in particular the <a href="http://codebetter.com/blogs/jeremy.miller/archive/2007/05/25/build-you-own-cab-part-3-the-supervising-controller-pattern.aspx">third one</a> about the Supervising controller.</p>

<p>I figured out that I didn&#8217;t want to make my view now anything or as little as possible about my presenter or at least as little as possible. The way I have it now allows one view per presenter; they are mapped one-to-one. In the repository of the contrib project there is the framework and a little sample application. A log viewer that uses the framework to demonstrate its usage.
I was going to tell you about Modules etc. but all that stuff is nicely explained in the ninject wiki so I don&#8217;t really feel the need to write it all up again. I will however explain you how to get started with the MVP framework that now comes with Ninject.</p>

<p>We need to tell our application that we want to use Ninject and to do that there are 2 ways:</p>

<ul>
<li>Inherit of <code>Ninject.Framework.PresentationFoundation.NinjectWpfApplication</code> which also makes you change the XAML of the application. I didn&#8217;t really like that so I came up with a second way.</li>
<li>Initialize the application through the KernelContainer static helper class.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[LogMyCalls]</span>
</span><span class='line'><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">App</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnStartup</span><span class="p">(</span><span class="n">StartupEventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="c1">// KernelContainer.InitializeApplicationWith(this, new LinFuModule(), new NLogModule(), new WpfModule(), new LoggingModule());</span>
</span><span class='line'>        <span class="k">this</span><span class="p">.</span><span class="n">InitializeApplicationWith</span><span class="p">(</span><span class="k">new</span> <span class="n">LinFuModule</span><span class="p">(),</span> <span class="k">new</span> <span class="n">NLogModule</span><span class="p">(),</span> <span class="k">new</span> <span class="n">WpfModule</span><span class="p">(),</span> <span class="k">new</span> <span class="n">LoggingModule</span><span class="p">());</span>
</span><span class='line'>        <span class="k">base</span><span class="p">.</span><span class="n">OnStartup</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This tells our application that we are going to use Ninject in this application. And should initialize all the services we will need in our application.
Next on the list is the View. There is probably a better way to do this (read I&#8217;m not entirely happy with this but have a rather small brain). We need to tell the view which presenter we will be using, for that I added a PresentedBy attribute that takes a type (the presenter type).  And you also have to override the OnInitialized event and again use the KernelContainer helper class to initialize the presenter. There is a reason for this, at a certain point during my testing I had it so that the view was agnostic of the controller but that meant I would have to skip a couple of checks before running the window. I may add that later again not sure.  The views aren&#8217;t decorated with the service attribute so they won&#8217;t get picked up by the AutoModule instead we inject it manually through its initialisation procedure.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[PresentedBy(typeof(LogsPresenter))]</span>
</span><span class='line'><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">LogsView</span> <span class="p">:</span>  <span class="n">ILogsView</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="nf">LogsView</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">InitializeComponent</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnInitialized</span><span class="p">(</span><span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">base</span><span class="p">.</span><span class="n">OnInitialized</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">this</span><span class="p">.</span><span class="n">WireUp</span><span class="p">();</span> <span class="c1">// KernelContainer.WireUp(this);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [PublishAction]</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">event</span> <span class="n">EventHandler</span> <span class="n">GenerateLogs</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [PublishAction]</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">event</span> <span class="n">EventHandler</span> <span class="n">FilterLogs</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So far we&#8217;ve got a view that knows how to initialize a presenter but it also needs to be able to communicate with the presenter. I chose to expose the relevant items I will need in my presenter through properties on the view and I chose to use a Publish/Subscribe model through a customized Ninject MessageBroker to handle my events. This allowed me to not couple my view too tightly to the presenter. You can customize the name of the published action but not the publisher at this moment. And that&#8217;s what the PublishAction is for.  It uses a standard event handler but will ignore the arguments that you would send to it. The presenter should go back to the view to interrogate it about its state.</p>

<p>And the last piece we need to talk about is the Presenter. The Ninject presentation foundation project holds a Generic PresenterBase class that takes the interface/type of the view as a type parameter. I let Ninject auto-register my components so I just decorated the presenter class with [Service] and it will get picked up by the Ninject Kernel. You can subscribe to an action from the view by using a [SubscribeToAction] attribute. That attribute takes the class name of the view as a parameter as well as the name of the action you want to subscribe to.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Service, LogMyCalls]</span>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">LogsPresenter</span> <span class="p">:</span> <span class="n">PresenterBase</span><span class="p">&lt;</span><span class="n">ILogsView</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">private</span> <span class="k">readonly</span> <span class="n">ILogService</span> <span class="n">_logService</span><span class="p">;</span>
</span><span class='line'>    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IRandomDataService</span> <span class="n">_randomDataService</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [Inject]</span>
</span><span class='line'>    <span class="k">public</span> <span class="nf">LogsPresenter</span><span class="p">(</span><span class="n">ILogService</span> <span class="n">logService</span><span class="p">,</span> <span class="n">IRandomDataService</span> <span class="n">randomDataService</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">_logService</span> <span class="p">=</span> <span class="n">logService</span><span class="p">;</span>
</span><span class='line'>        <span class="n">_randomDataService</span> <span class="p">=</span> <span class="n">randomDataService</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="na">    [SubscribeToAction(typeof(LogsView), &quot;GenerateLogs&quot;)]</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">virtual</span> <span class="k">void</span> <span class="nf">GenerateLogs</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">_randomDataService</span><span class="p">.</span><span class="n">AddRandomData</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
</span><span class='line'>        <span class="n">SetFindAll</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that should be all you need to know to get started. It&#8217;s not a hell of a lot of code in the presentation framework and the sample application contains NSpecify specs in combination with Moq for mocking.</p>
</div>
  
  


    </article>
    <!-- divider for blog post -->
    <div class="divider"></div>
  
  <div class="pagination">
    
      <a class="prev" href="/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/3/">Newer &rarr;</a>
    
  </div>
</div>
</div>


      </div>
    </div>
    <footer role="contentinfo"><!-- start of footer container -->
  <div class="container">
    <!-- start of row - 4 widget columns -->
      <div class="row clearfix">
      <div class="twelve columns">
        <div class="logo">
          <img src="/images/logo.png" alt="" />
          <h2>Rants &amp; ramblings</h2>
        </div>
      </div>

      <div class="four columns">        
        <h6>Social networks</h6>
        <ul class="social_network">
          <li class="rollover"><a href="http://facebook.com/ivanportocarrero" class="yellowtip" title="Facebook"><span class="fb-rollover"></span><img src="/images/social/fb.png" alt="" /></a></li>
          <li class="rollover"><a href="http://twitter.com/casualjim" class="yellowtip" title="Follow me"><span class="twitter-rollover"></span><img src="/images/social/twitter.png" alt="" /></a></li>
          <li class="rollover"><a href="https://plus.google.com/u/1/106536131996809745163/posts" class="yellowtip" title="Google plus"><span class="google-rollover"></span><img src="/images/social/google-plus.png" alt="" /></a></li>
        </ul>       
      </div>
    </div>
    <!-- end of row -->
  
    <!-- start of row - 4 widget columns -->
      <div class="row clearfix">
      <div class="eight columns">
        <h6>About me</h6>
        <p>
        Welcome to my blog. This is a collection of random thoughts and rants.
        </p>
        <p>
        Allow me to introduce myself. My name is Ivan Porto Carrero and I'm an enthusiastic developer on  Scala, .NET and Ruby.<br />Through this blog I hope I can share some of that passion and maybe help somebody out when they are looking on how to do something.
        </p>
      </div>
      <div class="four columns">
        <h6>Latest posts</h6>
        <ul class="square">
        
          <li>
            <a href="/2011/08/01/backchat-developers/">work for backchat</a>
          </li>
        
          <li>
            <a href="/2010/09/30/radical-language-and-platform-shift/">Radical language and platform shift</a>
          </li>
        
          <li>
            <a href="/2010/03/12/video-of-fosdem-ironruby-presentation/">Video of FOSDEM IronRuby presentation</a>
          </li>
        
          <li>
            <a href="/2009/12/01/adding-a-console-to-your-ironruby-application/">Adding a console to your IronRuby application</a>
          </li>
        
          <li>
            <a href="/2009/11/08/a-good-url-regular-expression-repost/">A good url regular expression? (repost)</a>
          </li>
        
        </ul> 
      </div>
      <div class="four columns">
        <h6>Browse pages</h6>
        <ul class="square">
          <li><a href="/">Home</a></li>
          <li><a href="/archives">Archives</a></li>
          <li><a href="/projects">My projects</a></li>
        </ul> 
      </div>
    </div>
    <!-- end of row -->
    

    <!-- start of footer divider -->
    <div class="sixteen columns">
      <div class="footer-divider row"></div>
    </div>  
    <!-- end of footer divider -->
    
    <!-- start of bottoms -->
    <div class="clearfix footnote">
      <div class="eight columns">
        <p class="copyright">Copyright &copy; 2012 - Ivan Porto Carrero - All Right Reserved</p>
      </div>
      <div class="eight columns">
        <p class="align-right"><span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, designed by <a href="http://iweb-studio.com" target="_blank">iwebstudio</a></p>
      </div>
    </div>
    <!-- end of bottoms -->

  </div>
  <!-- end of footer container -->

</footer>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'casualjim';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<p id="back-top">
  <a href="#top"><span></span>To top</a>
</p>

</body>
</html>
